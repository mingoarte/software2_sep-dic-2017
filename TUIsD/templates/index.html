{% extends "base-home.html" %}

{% load static %}
<!-- Main navbar -->
{% block navbar %}
  {% if page_name == 'revisar' %}
    <nav class="navbar navbar-default" id ='navbar'>
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="{% url 'home' %}">TUIsD</a>
        </div>
        <ul class="nav navbar-nav">
          <li id="home"><a href="{% url 'home' %}">Home</a></li>
          {% if request.user.is_authenticated %}
          <li id="diseno"><a href="{% url 'build' %}">Dise√±o</a></li>
          <li id="temp"><a href="{% url 'ver_templates' %}">Ver Templates</a></li>
          {% endif %}
        </ul>
        <ul class="nav navbar-nav navbar-right">
          {% if request.user.is_authenticated %}
            <li><a href="{% url 'logout' %}"><span class="glyphicon glyphicon-log-in"></span> Logout </a></li>
          {% else %}

            <li id="crear_usuario"><a href="{% url 'crear_usuario' %}"><span class="glyphicon glyphicon-user"></span>Crear Usuario</a></li>

            <li><a href="{% url 'login' %}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
          {% endif %}

        </ul>
      </div>
    </nav>
  {% else %}

  {% endif %}
{% endblock navbar %}
<!-- /main navbar -->
{% block content %}
<div class="container">
  {% if page_name == 'Preview' %}
    <div class="row" style="margin-bottom: 10px;">
      <a type="button" class="btn btn-primary btn-lg" href="{% url 'editar' tem_id%}" style="margin-top: 20px;"><< Volver</a>
    </div>
  {% endif %}
  {% for pattern in patterns%}
    <div class="row">
        <div class="panel panel-default">
            <div class="panel-heading" style="text-align:center">
                <h2 class="panel-title">{{ pattern.question.texto_pregunta }}</h2>
            </div>
            <div class="panel-body">
                    {% if error_message %}
                    <div class="row">
                        <div class="alert alert-danger col-md-4 col-md-offset-4" role="alert">
                            <p class="text-danger"><strong>{{ error_message }}</strong></p>
                        </div>

                    </div>
                    {% endif %}
                <form action="{% url 'encuestas:vote' pattern.question.id %}" method="post">
                        {% csrf_token %}
                        {% for choice in pattern.options %}
                            <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
                            <label for="choice{{ forloop.counter }}">{{ choice.texto_opcion }}</label><br />
                        {% endfor %}
                        <!-- <div >
                                <label>
                                  <input class="check" type="checkbox" >
                                  Estoy seguro de mi respuesta
                                </label>
                        </div> -->
                        <input class="btn btn-primary" class="vote" type="submit" value="Votar" />
                </form>
            </div>
        </div>
    </div>
  {% endfor %}
</div>
<script>
$('.check').on('change', function() {
    if (this.checked) {
        $(this).closest('div.panel-body').find("input[class='vote']").prop('disabled', false);
    } else {
      alert("ENTRO")
        $(this).closest('div.panel-body').find("input[class='vote']").prop('disabled', true);
    }
});

</script>

{% endblock content %}

{% block custom_script %}

{% endblock custom_script %}
